(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{39:function(e,t,n){},51:function(e,t,n){e.exports=n(68)},65:function(e,t,n){},68:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(28),o=n.n(c),s=(n(39),n(8)),l=n(9),u=n(11),i=n(10),m=n(12),p=n(22),f=n(2),d=n(5),h=n(6),E=n(7),g="LOGIN",v="EDIT",b="REGISTER",O="LOGOUT",j="FOLLOW_USER",I="UNFOLLOW_USER";function y(e){return{type:b,data:e}}function S(e){return{type:g,data:e}}function k(e){return{type:j,data:e}}function N(e){return{type:v,data:e}}function w(e){return{type:I,data:e}}var x="GET_USER_POSTS",C="MAKE_POST",P="EDIT_POST",T="EDIT",U="COMMENT_POST",R="DELETE_COMMENT",A="RESET_POSTS",_="EDIT_COMMENT",F="DELETE_POST";function M(e){return{type:C,data:e}}function D(e){return{type:F,data:e}}function L(e){return{type:P,data:e}}function z(e){return{type:T,data:e}}function H(e){return{type:x,data:e}}function G(e){return{type:U,data:e}}var W={URI:"http://localhost:8080"};var J=Object(f.b)(function(e){return{auth:e.auth}},function(e){return{signout:function(){return e({type:O})},resetUserPosts:function(){return e({type:A})}}})(function(e){var t=e.auth.imageId;return r.a.createElement("nav",{id:"main-nav"},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(d.b,{to:"/me"},r.a.createElement("figure",{className:"nav-profilePic"},r.a.createElement("img",{src:"".concat(W.URI,"/feed/image/").concat(t),alt:""}),r.a.createElement("figcaption",null,localStorage.getItem("username"))))),r.a.createElement("li",null,r.a.createElement(d.b,{to:"/"},r.a.createElement(h.a,{icon:E.e})," HOME")),r.a.createElement("li",null,r.a.createElement(d.b,{to:"/discover"},r.a.createElement(h.a,{icon:E.m})," DISCOVER")),r.a.createElement("li",null,r.a.createElement(d.b,{to:"/signin",onClick:function(){e.resetUserPosts(),e.signout()}},r.a.createElement(h.a,{icon:E.g})," LOGOUT"))))});var B=function(e){return r.a.createElement("header",null,r.a.createElement("div",{className:"logo"},r.a.createElement(d.b,{to:"/"},r.a.createElement("h1",null,"iWi"))),localStorage.getItem("username")?r.a.createElement(J,null):null)};var Y=function(e){return r.a.createElement("footer",null,r.a.createElement("p",null,"\u24b8 CopyRights Tsani Mazalov 2019"))},V=n(25),q=n(1),K=n.n(q),X=n(4),Q="DELETE_COMMENT",Z="EDIT_COMMENT",$="COMMENT_POST",ee="GET_USER_SUBS_POSTS";function te(e){return{type:$,data:e}}function ne(e){return{type:ee,data:e}}var ae="FETCH_DATA",re="FETCH_BEGIN",ce="FETCH_ERROR";function oe(){return{type:re}}function se(){return{type:ae}}function le(){return{type:ce}}var ue=n(15),ie=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(u.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(r)))).state={text:"",fd:new FormData,imagePreviewUrl:""},n.handleChangeInput=function(e){e.persist();var t=e.target.files;if(t&&t.length>0){var a=new FileReader,r=e.target.files[0];n.state.fd.append(e.target.name,r,e.target.name),a.onloadend=function(){n.setState(function(e){return{imagePreviewUrl:a.result}})},a.readAsDataURL(r)}n.setState(Object(V.a)({},e.target.name,e.target.value))},n.handleSubmit=function(e){e.preventDefault(),""!==n.state.text||n.state.fd.get("postImg")?(n.state.fd.append("text",n.state.text),n.props.upload(n.state.fd)):n.props.createSnackbar({message:"You can not upload post without image or text!",timeout:3e3}),n.setState({text:"",imagePreviewUrl:"",fd:new FormData})},n.handlePreviewImgClose=function(e){n.setState({imagePreviewUrl:""})},n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.state,t=e.text,n=e.imagePreviewUrl;return r.a.createElement("div",{className:"postForm"},r.a.createElement("form",{id:"postForm",encType:"multipart/form-data",onSubmit:this.handleSubmit},r.a.createElement("textarea",{name:"text",id:"postText",placeholder:"Write something to your friends...",value:t,onChange:this.handleChangeInput}),r.a.createElement("div",{className:"inline-form-items"},r.a.createElement("div",{className:"uploadImage"},r.a.createElement("label",{htmlFor:"file"},r.a.createElement("img",{className:"icon",src:"https://cdn.iconscout.com/icon/free/png-256/gallery-44-267592.png",alt:"uploadImg"}),"Image"),r.a.createElement("input",{type:"file",id:"file",name:"postImg",onChange:this.handleChangeInput})),r.a.createElement("input",{disabled:!(this.state.fd.keys()>0||""!==t||""!==n),type:"submit",value:"Post"}))),r.a.createElement("div",{className:"uploadedImgPreview"},""!==n?r.a.createElement(r.a.Fragment,null,r.a.createElement("img",{id:"previewImg",src:n,alt:"uploadedImg"}),r.a.createElement("div",{onClick:this.handlePreviewImgClose,className:"overlay"},r.a.createElement("span",null,"x"))):null))}}]),t}(r.a.Component);var me=Object(f.b)(null,function(e){return{upload:function(t){return e((n=t,function(){var e=Object(X.a)(K.a.mark(function e(t){var a,r;return K.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t(oe()),e.next=4,fetch("".concat(W.URI,"/feed/posts/create"),{method:"POST",headers:{Authorization:"Api "+localStorage.getItem("token")},body:n});case 4:return a=e.sent,e.next=7,a.json();case 7:(r=e.sent).error?t(le()):(t(se()),t(M(r.post))),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),t(le()),console.log(e.t0);case 16:case"end":return e.stop()}},e,null,[[0,12]])}));return function(t){return e.apply(this,arguments)}}()));var n}}})(Object(ue.wrapComponent)(ie));var pe=Object(f.b)(function(e){return{auth:e.auth}})(function(e){var t=e.auth;return r.a.createElement("div",{id:"makeAPost"},r.a.createElement("figure",{className:"userInfo"},r.a.createElement(d.b,{to:"/profile/"+t._id},r.a.createElement("img",{src:"".concat(W.URI,"/feed/image/").concat(t.imageId),alt:"userPic"}),r.a.createElement("figcaption",null,t.username))),r.a.createElement(me,null))}),fe=n(13),de=n(18);function he(e){var t=new Date-new Date(e);return(t=Math.floor(t/6e4))<1?"less than a minute":t<60?t+" minute"+n(t):(t=Math.floor(t/60))<24?t+" hour"+n(t):(t=Math.floor(t/24))<30?t+" day"+n(t):(t=Math.floor(t/30))<12?t+" month"+n(t):(t=Math.floor(t/12))+" year"+n(t);function n(e){return 1!==e?"s":""}}var Ee="GET_USER_DATA",ge="FOLLOW",ve="UNFOLLOW",be="COMMENT_USER_POST";function Oe(e){return{type:ge,data:e}}function je(e){return{type:ve,data:e}}function Ie(e){return{type:Ee,data:e}}function ye(e){return{type:be,data:e}}function Se(e,t){return function(){var n=Object(X.a)(K.a.mark(function n(a){var r,c;return K.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,fetch("".concat(W.URI,"/feed/comments/edit/").concat(t),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Api "+localStorage.getItem("token")},body:JSON.stringify(e)});case 3:return r=n.sent,n.next=6,r.json();case 6:c=n.sent,a({type:"EDIT_COMMENT",data:c.post}),n.next=14;break;case 10:n.prev=10,n.t0=n.catch(0),a(le()),console.log(n.t0);case 14:case"end":return n.stop()}},n,null,[[0,10]])}));return function(e){return n.apply(this,arguments)}}()}var ke=function(e){var t=e.handleClose,n=e.deleteFunc,a=e.feedId,c=e.isPost;return r.a.createElement("div",null,r.a.createElement("div",{id:"myModal",className:"modal"},r.a.createElement("div",{className:"modal-content"},r.a.createElement("span",{onClick:t,className:"close"},"\xd7"),r.a.createElement("p",null,"Do you really want to delete this ".concat(c?"post":"comment","?")),r.a.createElement("button",{onClick:function(){return n(a)},className:"btn info"},"Yes"),r.a.createElement("button",{onClick:t,className:"btn default"},"No"))))},Ne="SEARCH";function we(e){return{type:Ne,data:e}}var xe="ERROR",Ce="RESET_ERRORS";function Pe(e){return{type:xe,data:e}}function Te(){return{type:Ce}}function Ue(e){return function(){var t=Object(X.a)(K.a.mark(function t(n){var a,r;return K.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n(oe()),t.next=4,fetch("".concat(W.URI,"/user/info/").concat(e),{headers:{"Content-Type":"application/json",Authorization:"Api "+localStorage.getItem("token")}});case 4:return a=t.sent,t.next=7,a.json();case 7:r=t.sent,n(se()),n(Ie(r.user)),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(0),n(le()),console.log(t.t0);case 16:case"end":return t.stop()}},t,null,[[0,12]])}));return function(e){return t.apply(this,arguments)}}()}function Re(e){return function(){var t=Object(X.a)(K.a.mark(function t(n){var a,r;return K.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n(oe()),t.prev=1,t.next=4,fetch("".concat(W.URI,"/user/follow/").concat(e),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Api "+localStorage.getItem("token")}});case 4:return a=t.sent,t.next=7,a.json();case 7:r=t.sent,n(se()),n(k(r.me)),n(Oe(r.user)),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(1),n(le()),console.log(t.t0);case 17:case"end":return t.stop()}},t,null,[[1,13]])}));return function(e){return t.apply(this,arguments)}}()}var Ae=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.imageId,n=e.username,a=e.id,c=e.firstName,o=e.lastName;return r.a.createElement("div",{className:"card"},r.a.createElement(d.b,{to:"/profile/"+a},r.a.createElement("figure",null,r.a.createElement("img",{src:"".concat(W.URI,"/feed/image/").concat(t),alt:""}),r.a.createElement("div",{className:"names"},r.a.createElement("figcaption",null,n),r.a.createElement("span",{className:"fullname"},c," ",o)))))}}]),t}(a.Component);var _e=Object(f.b)(null,function(e){return{getUserInfo:function(t){return e(Ue(t))}}})(Ae),Fe=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.users,n=e.modalHeaderName,a=e.handleClose;return r.a.createElement("div",{onClick:a,id:"myModal",className:"modal"},r.a.createElement("div",{className:"modal-content"},r.a.createElement("span",{onClick:a,className:"close"},"\xd7"),r.a.createElement("div",{className:"modal-header"},r.a.createElement("h2",null,n)),r.a.createElement("ul",null,t.length>0?t.map(function(e){return r.a.createElement("li",{key:e._id},r.a.createElement(_e,{imageId:e.imageId,username:e.username,firstName:e.firstName,lastName:e.lastName,id:e._id}))}):r.a.createElement("li",null,"No ",n))))}}]),t}(a.Component);var Me=Object(f.b)(function(e){return{auth:e.auth,userPosts:e.userPosts,posts:e.posts}},function(e){return{likeCom:function(t){return e(function(e){return function(){var t=Object(X.a)(K.a.mark(function t(n){var a;return K.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("".concat(W.URI,"/feed/comments/like/").concat(e),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Api "+localStorage.getItem("token")}});case 3:return a=t.sent,t.next=6,a.json();case 6:t.sent.errors.length>0&&n(le()),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(0),n(le()),console.log(t.t0);case 14:case"end":return t.stop()}},t,null,[[0,10]])}));return function(e){return t.apply(this,arguments)}}()}(t))},dislikeCom:function(t){return e(function(e){return function(){var t=Object(X.a)(K.a.mark(function t(n){var a;return K.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("".concat(W.URI,"/feed/comments/dislike/").concat(e),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Api "+localStorage.getItem("token")}});case 3:return a=t.sent,t.next=6,a.json();case 6:t.sent.errors.length>0&&n(le()),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(0),n(le()),console.log(t.t0);case 14:case"end":return t.stop()}},t,null,[[0,10]])}));return function(e){return t.apply(this,arguments)}}()}(t))},editComm:function(t){return e(Se(t))},deleteComm:function(t){return e(function(e){return function(){var t=Object(X.a)(K.a.mark(function t(n){var a,r;return K.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("".concat(W.URI,"/feed/comments/delete/").concat(e),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Api "+localStorage.getItem("token")}});case 3:return a=t.sent,t.next=6,a.json();case 6:r=t.sent,n({type:"DELETE_COMMENT",data:r.post}),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(0),n(le()),console.log(t.t0);case 14:case"end":return t.stop()}},t,null,[[0,10]])}));return function(e){return t.apply(this,arguments)}}()}(t))}}})(function(e){var t=e.creatorName,n=e.creatorImg,c=e.text,o=e.date,s=e.likes,l=e.commentId,u=e.likeCom,i=e.dislikeCom,m=e.userId,p=e.auth,f=e.deleteComm,g=Object(a.useState)(!1),v=Object(fe.a)(g,2),b=v[0],O=v[1],j=Object(a.useState)(!1),I=Object(fe.a)(j,2),y=I[0],S=I[1],k=Object(a.useState)(s.length),N=Object(fe.a)(k,2),w=N[0],x=N[1],C=s.includes(localStorage.getItem("userId")),P=Object(a.useState)(C),T=Object(fe.a)(P,2),U=T[0],R=T[1],A=Object(a.useState)([]),_=Object(fe.a)(A,2),F=_[0],M=_[1],D=function(){var e=Object(X.a)(K.a.mark(function e(){var t,n;return K.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(W.URI,"/feed/comments/likes/").concat(l));case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,M(n.likes);case 7:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)(function(){D()},[]);var L=function(e){e.persist(),O(function(e){return!1}),S(function(e){return!1})};return r.a.createElement("div",{className:"comment"},r.a.createElement("figure",{className:"commentData"},r.a.createElement(d.b,{to:"/profile/"+m},r.a.createElement("img",{src:"".concat(W.URI,"/feed/image/").concat(n),alt:""}),r.a.createElement("figcaption",null,t))),r.a.createElement("div",{className:"commentContainer"},r.a.createElement("p",null,c," "),r.a.createElement("div",{className:"commentBtns"},U?r.a.createElement("button",{onClick:function(e){e.persist(),x(function(e){return e-1}),R(function(e){return!e}),i(l),M(function(e){return e=e.filter(function(e){return e._id!==p._id})})},className:"liked"},r.a.createElement(h.a,{icon:E.d})):r.a.createElement("button",{onClick:function(e){e.persist(),x(function(e){return e+1}),R(function(e){return!e}),u(l),M(function(e){return[].concat(Object(de.a)(e),[p])})}},r.a.createElement(h.a,{icon:E.d})),p._id===m?r.a.createElement("button",{onClick:function(e){e.persist(),O(function(e){return!0})}},r.a.createElement(h.a,{icon:E.h})):null)),r.a.createElement("div",{className:"meta"},r.a.createElement("span",{className:"date"},he(o)),r.a.createElement("span",{onClick:function(e){e.persist(),S(function(e){return!0})}},w," likes")),b?r.a.createElement(ke,{isPost:!1,feedId:l,deleteFunc:f,handleClose:L}):null,y?r.a.createElement(Fe,{handleClose:L,modalHeaderName:"Likes",users:F}):null)}),De=n(26);var Le=function(e,t){var n=Object(a.useState)({}),r=Object(fe.a)(n,2),c=r[0],o=r[1];return{inputs:c,handleSubmit:function(n){n.preventDefault(),e(),void 0!==t||t||o(function(e){return{}})},handleChangeInput:function(e){e.persist(),o(function(t){return Object(De.a)({},t,Object(V.a)({},e.target.name,e.target.value))})}}};var ze=Object(f.b)(null,function(e){return{commentPost:function(t){return e((n=t,function(){var e=Object(X.a)(K.a.mark(function e(t){var a,r;return K.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(W.URI,"/feed/comments/create"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Api "+localStorage.getItem("token")},body:JSON.stringify(n)});case 3:return a=e.sent,e.next=6,a.json();case 6:r=e.sent,t(G(r.post)),t(te(r.post)),t(ye(r.post)),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),t(le()),console.log(e.t0);case 16:case"end":return e.stop()}},e,null,[[0,12]])}));return function(t){return e.apply(this,arguments)}}()));var n}}})(Object(ue.wrapComponent)(function(e){var t=e.postId,n=e.commentPost,a=e.createSnackbar,c=Le(function(e){""===l.text?a({message:"You can not make comment without text!",timeout:3e3}):n(Object(De.a)({},l,{postId:t}))}),o=c.handleSubmit,s=c.handleChangeInput,l=c.inputs;return r.a.createElement("form",{className:"commentForm",onSubmit:o},r.a.createElement("textarea",{placeholder:"Write a comment...",name:"text",id:"comment",value:l.text||"",onChange:s}),r.a.createElement("input",{disabled:""===l.text||!l.text,type:"submit",value:"Comment"}))}));var He=function(e){var t=e.comments,n=e.postId;return r.a.createElement("section",{className:"comments"},r.a.createElement("h3",null,"Comments"),r.a.createElement("ul",null,t.length>0?t.map(function(e){return r.a.createElement("li",{key:e._id},r.a.createElement(Me,{creatorName:e.creator.username,creatorImg:e.creator.imageId,userId:e.creator._id,text:e.text,date:e.date,likes:e.likes,commentId:e._id}))}):null),r.a.createElement(ze,{postId:n}))};var Ge=Object(f.b)(null,function(e){return{editComm:function(t,n){return e(Se(t,n))},editUserPost:function(t,n){return e(function(e,t){return function(){var n=Object(X.a)(K.a.mark(function n(a){var r,c;return K.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,a(oe()),n.next=4,fetch("".concat(W.URI,"/feed/posts/edit/").concat(t),{method:"PUT",headers:{Authorization:"Api "+localStorage.getItem("token"),"Content-Type":"application/json"},body:JSON.stringify(e)});case 4:return r=n.sent,n.next=7,r.json();case 7:c=n.sent,a(se()),a(L(c.post)),n.next=16;break;case 12:n.prev=12,n.t0=n.catch(0),a(le()),console.log(n.t0);case 16:case"end":return n.stop()}},n,null,[[0,12]])}));return function(e){return n.apply(this,arguments)}}()}(t,n))}}})(function(e){var t=e.isPost,n=e.feedId,a=e.text,c=e.editUserPost,o=e.editComm,s=Le(function(e){t?c(i,n):o(i,n)}),l=s.handleSubmit,u=s.handleChangeInput,i=s.inputs;return r.a.createElement("form",{id:"editFeedForm",onSubmit:l},r.a.createElement("textarea",{placeholder:"Write something...",name:"text",id:"feed",value:i.text||a,onChange:u}),r.a.createElement("input",{type:"submit",value:"SAVE"}))});var We=Object(f.b)(function(e){return{auth:e.auth,userPosts:e.userPosts}},function(e){return{like:function(t){return e(function(e){return function(){var t=Object(X.a)(K.a.mark(function t(n){var a;return K.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("".concat(W.URI,"/feed/posts/like/").concat(e),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Api "+localStorage.getItem("token")}});case 3:return a=t.sent,t.next=6,a.json();case 6:t.sent.errors.length>0&&n(le()),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(0),n(le()),console.log(t.t0);case 14:case"end":return t.stop()}},t,null,[[0,10]])}));return function(e){return t.apply(this,arguments)}}()}(t))},dislike:function(t){return e(function(e){return function(){var t=Object(X.a)(K.a.mark(function t(n){var a;return K.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("".concat(W.URI,"/feed/posts/dislike/").concat(e),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Api "+localStorage.getItem("token")}});case 3:return a=t.sent,t.next=6,a.json();case 6:t.sent.errors.length>0&&n(le()),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(0),n(le()),console.log(t.t0);case 14:case"end":return t.stop()}},t,null,[[0,10]])}));return function(e){return t.apply(this,arguments)}}()}(t))},delPost:function(t){return e(function(e){return function(){var t=Object(X.a)(K.a.mark(function t(n){var a,r;return K.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n(oe()),t.next=4,fetch("".concat(W.URI,"/feed/posts/").concat(e),{method:"DELETE",headers:{Authorization:"Api "+localStorage.getItem("token")}});case 4:return a=t.sent,t.next=7,a.json();case 7:r=t.sent,n(se()),n(D(r.posts)),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(0),n(le()),console.log(t.t0);case 16:case"end":return t.stop()}},t,null,[[0,12]])}));return function(e){return t.apply(this,arguments)}}()}(t))},follow:function(t){return e(Re(t))}}})(function(e){var t=e.username,n=e.userImg,c=e.date,o=e.text,s=e.postImg,l=e.likes,u=e.comments,i=e.postId,m=e.like,p=e.dislike,f=e.userId,g=e.auth,v=e.delPost,b=(e.userPosts,Object(a.useState)(!1)),O=Object(fe.a)(b,2),j=O[0],I=O[1],y=Object(a.useState)(!1),S=Object(fe.a)(y,2),k=S[0],N=S[1],w=Object(a.useState)(!1),x=Object(fe.a)(w,2),C=x[0],P=x[1],T=Object(a.useState)(!1),U=Object(fe.a)(T,2),R=U[0],A=U[1],_=Object(a.useState)(l.length),F=Object(fe.a)(_,2),M=F[0],D=F[1],L=l.findIndex(function(e){return e._id===localStorage.getItem("userId")})>=0,z=Object(a.useState)(L),H=Object(fe.a)(z,2),G=H[0],J=H[1],B=s?"postText":"postText text-only-large",Y=s?"buttons":"buttons text-only-small",V=1===M?"like":"likes",q=function(e){e.persist(),I(function(e){return!0})},K=function(e){e.persist(),I(function(e){return!1}),A(function(){return!1})},X=function(e){e.persist(),P(function(e){return!e})};return r.a.createElement("div",null,r.a.createElement("div",{className:"meta"},r.a.createElement("div",null,r.a.createElement("figure",{className:"userInfo"},r.a.createElement(d.b,{to:"/profile/"+f},r.a.createElement("img",{src:"".concat(W.URI,"/feed/image/").concat(n),alt:"userPic"}),r.a.createElement("figcaption",null,t)))),r.a.createElement("span",{className:"date"},he(c))),""===o?null:r.a.createElement("div",{className:B},k?r.a.createElement(Ge,{isPost:!0,feedId:i,text:o}):r.a.createElement("p",null,o)),s?r.a.createElement("figure",null,r.a.createElement("img",{className:"postPic",src:"".concat(W.URI,"/feed/image/").concat(s),alt:""})):null,r.a.createElement("div",{className:Y},r.a.createElement("div",{className:"left"},G?r.a.createElement("button",{onClick:function(e){e.persist(),D(function(e){return e-1}),J(function(e){return!e}),p(i)},className:"liked"},r.a.createElement(h.a,{icon:E.d})):r.a.createElement("button",{onClick:function(e){e.persist(),D(function(e){return e+1}),J(function(e){return!e}),m(i)}},r.a.createElement(h.a,{icon:E.d})),r.a.createElement("button",{style:C?{color:"#8AAAE5"}:{color:"inherit"},onClick:X},r.a.createElement(h.a,{icon:E.a}))),r.a.createElement("div",{className:"right"},t===g.username?r.a.createElement("div",null,r.a.createElement("button",{onClick:q},r.a.createElement(h.a,{icon:E.i})),r.a.createElement("button",{onClick:function(e){e.persist(),N(function(e){return!0})}},r.a.createElement(h.a,{icon:E.b}))):r.a.createElement("div",null,"Admin"===localStorage.getItem("role")?r.a.createElement("button",{onClick:q},r.a.createElement(h.a,{icon:E.i})):null))),r.a.createElement("div",{className:"postMeta"},r.a.createElement("div",{className:"meta"},r.a.createElement("button",{onClick:function(e){e.persist(),A(function(e){return!0})},className:"likes"},M+" "+V),r.a.createElement("span",{onClick:X},u.length," Comments")),C?r.a.createElement(He,{comments:u,postId:i}):null),j?r.a.createElement(ke,{isPost:!0,feedId:i,deleteFunc:v,handleClose:K}):null,R?r.a.createElement(Fe,{handleClose:K,modalHeaderName:"Likes",users:l}):null)}),Je=function(e,t){var n=new Date(e.date);return new Date(t.date)-n},Be=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.posts;return r.a.createElement("section",{id:"posts"},e.length>0?e.sort(Je).map(function(e){return r.a.createElement("article",{key:e._id,className:"post"},r.a.createElement(We,{username:e.creator.username,userId:e.creator._id,userImg:e.creator.imageId,postId:e._id,date:e.date,text:e.text,postImg:e.imageId,likes:e.likes,comments:e.comments}))}):null)}}]),t}(a.Component);n(65);var Ye=function(e){return r.a.createElement("div",{className:"loader"})},Ve=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.userPosts,n=e.subsPosts,a=e.fetchStatus;return console.log(t,n),r.a.createElement("main",null,r.a.createElement(pe,null),a>0?r.a.createElement(Ye,null):r.a.createElement(Be,{posts:t.concat(n)}))}}]),t}(a.Component);var qe=Object(f.b)(function(e){return{userPosts:e.userPosts,subsPosts:e.posts,fetchStatus:e.fetchStatus}})(Ve),Ke=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(u.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(r)))).state={showModal:!1,users:[],modalHeaderName:""},n.handleShow=function(e){e.persist(),n.setState(function(t){return{showModal:!0,users:n.props.user[e.target.id],modalHeaderName:e.target.name}})},n.handleClose=function(e){e.persist(),n.setState(function(e){return{showModal:!1,users:[],modalHeaderName:""}})},n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props.user;if(0===Object.entries(t).length)return r.a.createElement(Ye,null);var n=t.followers.findIndex(function(e){return e._id===localStorage.getItem("userId")})>=0;return t.id===localStorage.getItem("userId")?r.a.createElement(p.a,{to:"/me"}):r.a.createElement("main",null,r.a.createElement("div",{className:"userInfoHeader"},r.a.createElement("a",{href:"./myprofile.html"},r.a.createElement("figure",{className:"profilePic"},r.a.createElement("img",{src:"".concat(W.URI,"/feed/image/").concat(t.imageId),alt:"userImg"}),r.a.createElement("figcaption",null,t.username))),r.a.createElement("div",{className:"headerInfoContainer"},r.a.createElement("div",{className:"userMeta"},r.a.createElement("span",null,t.posts.length," posts"),r.a.createElement("span",null,r.a.createElement("button",{name:"Followers",id:"followers",onClick:this.handleShow},t.followers.length," followers")),r.a.createElement("span",null,r.a.createElement("button",{name:"Subscriptions",id:"subscriptions",onClick:this.handleShow},t.subscriptions.length," following"))),n?r.a.createElement("button",{onClick:function(){return e.props.unfollow(t.id)},className:"followBtn"},"UNFOLLOW"):r.a.createElement("button",{onClick:function(){return e.props.follow(t.id)},className:"followBtn"},"FOLLOW"))),r.a.createElement(Be,{posts:t.posts}),this.state.showModal?r.a.createElement(Fe,{handleClose:this.handleClose,modalHeaderName:this.state.modalHeaderName,users:this.state.users}):null)}},{key:"componentDidUpdate",value:function(){var e=Object(X.a)(K.a.mark(function e(t){return K.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.match.params.userId!==this.props.match.params.userId&&this.props.getUserInfo(this.props.match.params.userId);case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.props.getUserInfo(this.props.match.params.userId)}}]),t}(a.Component);var Xe=Object(f.b)(function(e){return{user:e.user}},function(e){return{follow:function(t){return e(Re(t))},unfollow:function(t){return e(function(e){return function(){var t=Object(X.a)(K.a.mark(function t(n){var a,r;return K.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n(oe()),t.next=4,fetch("".concat(W.URI,"/user/unfollow/").concat(e),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Api "+localStorage.getItem("token")}});case 4:return a=t.sent,t.next=7,a.json();case 7:r=t.sent,n(se()),n(je(r.user)),n(w(r.me)),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(0),n(le()),console.log(t.t0);case 17:case"end":return t.stop()}},t,null,[[0,13]])}));return function(e){return t.apply(this,arguments)}}()}(t))},getUserInfo:function(t){return e(Ue(t))}}})(Ke),Qe=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.foundUsers;return r.a.createElement("div",{className:"results"},r.a.createElement("ul",null,e&&e.length>0?e.map(function(e){return r.a.createElement("li",{key:e._id},r.a.createElement(_e,{imageId:e.imageId,username:e.username,firstName:e.firstName,lastName:e.lastName,id:e._id}))}):r.a.createElement("p",null,"No found users")))}}]),t}(a.Component);var Ze=Object(f.b)(function(e){return{foundUsers:e.users.foundUsers}})(Qe);var $e=Object(f.b)(function(e){return{fetchStatus:e.fetchStatus}},function(e){return{search:function(t){return e(function(e){var t=e.searchText;return function(){var e=Object(X.a)(K.a.mark(function e(n){var a,r;return K.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n(oe()),e.next=4,fetch("".concat(W.URI,"/user/search?searchText=").concat(t),{headers:{"Content-Type":"application/json",Authorization:"Api "+localStorage.getItem("token")}});case 4:return a=e.sent,e.next=7,a.json();case 7:r=e.sent,n(se()),n(we(r)),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),n(le()),console.log(e.t0);case 16:case"end":return e.stop()}},e,null,[[0,12]])}));return function(t){return e.apply(this,arguments)}}()}(t))}}})(function(e){var t=e.search,n=e.fetchStatus,a=Le(function(e){t(s)}),c=a.handleSubmit,o=a.handleChangeInput,s=a.inputs;return r.a.createElement("main",null,r.a.createElement("div",null,r.a.createElement("div",{className:"search"},r.a.createElement("h1",null,"Discover more people"),r.a.createElement("form",{id:"searchForm",onSubmit:c},r.a.createElement("input",{type:"search",placeholder:"Search...",name:"searchText",value:s.searchText||"",onChange:o}))),n>0?r.a.createElement(Ye,null):r.a.createElement(Ze,null)))});var et=Object(f.b)(null,function(e){return{editInfo:function(t){return e((n=t,function(){var e=Object(X.a)(K.a.mark(function e(t){var a,r;return K.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t(oe()),e.next=4,fetch("".concat(W.URI,"/user/edit"),{method:"PUT",headers:{Authorization:"Api "+localStorage.getItem("token"),"Content-Type":"application/json"},body:JSON.stringify(n)});case 4:return a=e.sent,e.next=7,a.json();case 7:r=e.sent,localStorage.setItem("username",r.user.username),t(se()),t(N(r.user)),t(z(r.user.posts)),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),t(le());case 17:case"end":return e.stop()}},e,null,[[0,14]])}));return function(t){return e.apply(this,arguments)}}()));var n}}})(Object(ue.wrapComponent)(function(e){var t=e.editInfo,n=e.createSnackbar,a=Le(function(e){t(s),n({message:"User info succesfully updated!",timeout:3e3})}),c=a.handleSubmit,o=a.handleChangeInput,s=a.inputs;return r.a.createElement("form",{className:"editForm",onSubmit:c},r.a.createElement("span",null,r.a.createElement("input",{type:"text",name:"username",placeholder:"Username...",id:"username",value:s.username||"",onChange:o})),r.a.createElement("span",null,r.a.createElement("input",{type:"text",name:"firstName",placeholder:"First Name...",id:"fistName",value:s.firstName||"",onChange:o})),r.a.createElement("span",null,r.a.createElement("input",{type:"text",name:"lastName",placeholder:"Last Name...",id:"lastName",value:s.lastName||"",onChange:o})),r.a.createElement("input",{type:"submit",value:"EDIT"}))}));var tt=Object(f.b)(function(e){return{errors:e.errors}},function(e){return{changePass:function(t){return e((n=t,function(){var e=Object(X.a)(K.a.mark(function e(t){var a,r;return K.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t(oe()),e.next=4,fetch("".concat(W.URI,"/user/changePassword"),{method:"PUT",headers:{Authorization:"Api "+localStorage.getItem("token"),"Content-Type":"application/json"},body:JSON.stringify(n)});case 4:return a=e.sent,e.next=7,a.json();case 7:r=e.sent,console.log(r),r.error?t(Pe([r])):t(se()),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),t(le());case 15:case"end":return e.stop()}},e,null,[[0,12]])}));return function(t){return e.apply(this,arguments)}}()));var n},resetErr:function(){return e(Te)}}})(Object(ue.wrapComponent)(function(e){var t=e.changePass,n=e.createSnackbar,a=e.errors,c=e.resetErr,o=Le(function(){Object.values(u).length<2?n({message:"All fields are required!",timeout:3e3}):(t(u),n({message:"Password is changed!",timeout:3e3}),c())}),s=o.handleSubmit,l=o.handleChangeInput,u=o.inputs;return r.a.createElement("form",{className:"editForm",onSubmit:s},a.length>0&&r.a.createElement("p",{className:"error"},a[a.length-1].message),r.a.createElement("span",null,r.a.createElement("i",{className:"fas fa-key"}),r.a.createElement("input",{type:"password",name:"oldPassword",placeholder:"Old password...",value:u.oldPassword||"",onChange:l})),r.a.createElement("span",null,r.a.createElement("i",{className:"fas fa-lock"}),r.a.createElement("input",{type:"password",name:"newPassword",placeholder:"New password...",value:u.newPassword||"",onChange:l})),r.a.createElement("input",{type:"submit",value:"CHANGE"}))})),nt=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(u.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(r)))).state={imagePreviewUrl:"",fd:new FormData},n.handleChangeInput=function(e){var t=e.target.files;if(t&&t.length>0){var a=new FileReader,r=e.target.files[0];n.state.fd.append(e.target.name,r,e.target.name),a.onloadend=function(){n.setState({imagePreviewUrl:a.result})},a.readAsDataURL(r)}},n.handleSubmit=function(e){e.preventDefault(),n.props.changeProfilePic(n.state.fd),n.props.createSnackbar({message:"Profile picture is changed!",timeout:3e3})},n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("form",{className:"editForm",encType:"multipart/form-data",onSubmit:this.handleSubmit},r.a.createElement("figure",null,r.a.createElement("img",{className:"profileImg",src:this.state.imagePreviewUrl||"".concat(W.URI,"/feed/image/").concat(this.props.auth.imageId),alt:""}),r.a.createElement("div",{className:"uploadImage"},r.a.createElement("label",{htmlFor:"file"},r.a.createElement("img",{className:"icon",src:"https://cdn.iconscout.com/icon/free/png-256/gallery-44-267592.png",alt:"uploadImg"}),"Change Profile Picture"),r.a.createElement("input",{type:"file",id:"file",name:"avatar",onChange:this.handleChangeInput}))),r.a.createElement("input",{type:"submit",value:"SAVE"}))}}]),t}(a.Component);var at=Object(f.b)(function(e){return{auth:e.auth}},function(e){return{changeProfilePic:function(t){return e((n=t,function(){var e=Object(X.a)(K.a.mark(function e(t){var a,r;return K.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t(oe()),e.next=4,fetch("".concat(W.URI,"/user/changePic"),{method:"PUT",headers:{Authorization:"Api "+localStorage.getItem("token")},body:n});case 4:return a=e.sent,e.next=7,a.json();case 7:r=e.sent,t(se()),t(N(r.user)),t(z(r.user.posts)),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),t(le());case 16:case"end":return e.stop()}},e,null,[[0,13]])}));return function(t){return e.apply(this,arguments)}}()));var n}}})(Object(ue.wrapComponent)(nt)),rt=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("main",null,r.a.createElement("div",{className:"editUserInfo"},r.a.createElement(at,null),r.a.createElement("h3",null,"Change your personal information"),r.a.createElement(et,null),r.a.createElement("h3",null,"Change your password"),r.a.createElement(tt,null)))}}]),t}(a.Component);var ct=function(e){return r.a.createElement("main",null,r.a.createElement("div",{className:"message"},r.a.createElement("p",null,"WE ARE SORRY!!! THE PAGE YOU ARE LOOKING FOR DOES NOT EXIST!!! :(")))};var ot=Object(f.b)(function(e){return{errors:e.errors}},function(e){return{login:function(t){return e((n=t,function(){var e=Object(X.a)(K.a.mark(function e(t){var a,r;return K.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(W.URI,"/auth/signin"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 3:return a=e.sent,e.next=6,a.json();case 6:(r=e.sent).error?t(Pe(r)):(localStorage.setItem("username",r.user.username),localStorage.setItem("userId",r.user._id),localStorage.setItem("role",r.user.roles),localStorage.setItem("token",r.token),t(S(r.user))),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}},e,null,[[0,10]])}));return function(t){return e.apply(this,arguments)}}()));var n},resetErr:function(){return e(Te())}}})(Object(ue.wrapComponent)(function(e){var t=e.login,n=e.errors,c=e.createSnackbar,o=e.resetErr,s=Le(function(e){Object.values(i).length<2?c({message:"All fields are required!",timeout:3e3}):(t(i),o())}),l=s.handleSubmit,u=s.handleChangeInput,i=s.inputs;return Object(a.useEffect)(function(){return function(){o()}},[o]),r.a.createElement("main",null,r.a.createElement("form",{id:"loginForm",onSubmit:l},r.a.createElement("h1",null,"SIGN IN"),n.length>0&&r.a.createElement("p",{className:"error"},n[n.length-1].message),r.a.createElement("span",null,r.a.createElement(h.a,{icon:E.c}),r.a.createElement("input",{type:"email",name:"email",placeholder:"Email...",id:"email",value:i.email||"",onChange:u})),r.a.createElement("span",null,r.a.createElement(h.a,{icon:E.f}),r.a.createElement("input",{type:"password",name:"password",placeholder:"Password...",id:"password",value:i.password||"",onChange:u})),r.a.createElement("input",{type:"submit",defaultValue:"SIGN IN"})),r.a.createElement("div",{className:"message"},r.a.createElement("span",null,"You are not signed up yet?")," ",r.a.createElement(d.b,{to:"/signup"},"SIGN UP")))}));var st=Object(f.b)(function(e){return{errors:e.errors}},function(e){return{register:function(t){return e((n=t,function(){var e=Object(X.a)(K.a.mark(function e(t){var a,r,c,o;return K.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(W.URI,"/auth/signup"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 3:return a=e.sent,e.next=6,a.json();case 6:if(!(r=e.sent).errors){e.next=11;break}t(Pe(r.errors)),e.next=18;break;case 11:return e.next=13,fetch("".concat(W.URI,"/auth/signin"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 13:return c=e.sent,e.next=16,c.json();case 16:(o=e.sent).errors?t(Pe(o.errors)):(localStorage.setItem("username",o.user.username),localStorage.setItem("token",o.token),localStorage.setItem("userId",o.user._id),localStorage.setItem("role",o.user.roles),t(y(o.user)));case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(0),console.log(e.t0);case 23:case"end":return e.stop()}},e,null,[[0,20]])}));return function(t){return e.apply(this,arguments)}}()));var n},resetErr:function(){return e(Te())}}})(Object(ue.wrapComponent)(function(e){var t=e.register,n=e.errors,c=e.createSnackbar,o=e.resetErr,s=Le(function(e){Object.values(i).length<5?c({message:"All fields are required!",timeout:3e3}):(t(i),o())},!0),l=s.handleSubmit,u=s.handleChangeInput,i=s.inputs;return Object(a.useEffect)(function(){return function(){o()}},[o]),r.a.createElement("main",null,r.a.createElement("form",{id:"registerForm",onSubmit:l},r.a.createElement("h1",null,"SIGN UP"),n.length>0&&r.a.createElement("p",{className:"error"},n[n.length-1].msg),r.a.createElement("span",null,r.a.createElement(h.a,{icon:E.l}),r.a.createElement("input",{type:"text",name:"username",placeholder:"Username...",id:"username",onChange:u,value:i.username||""})),r.a.createElement("span",null,r.a.createElement(h.a,{icon:E.j}),r.a.createElement("input",{type:"text",name:"firstName",placeholder:"First Name...",id:"firstName",onChange:u,value:i.firstName||""})),r.a.createElement("span",null,r.a.createElement(h.a,{icon:E.k}),r.a.createElement("input",{type:"text",name:"lastName",placeholder:"Last Name...",id:"lastName",onChange:u,value:i.lastName||""})),r.a.createElement("span",null,r.a.createElement(h.a,{icon:E.c}),r.a.createElement("input",{type:"email",name:"email",placeholder:"Email...",id:"email",onChange:u,value:i.email||""})),r.a.createElement("span",null,r.a.createElement(h.a,{icon:E.f}),r.a.createElement("input",{type:"password",name:"password",placeholder:"Password...",id:"pass",onChange:u,value:i.password||""})),r.a.createElement("input",{type:"submit",defaultValue:"SIGN UP"})),r.a.createElement("div",{className:"message"},r.a.createElement("span",null,"You are already sign in?")," ",r.a.createElement(d.b,{to:"/signin"},"SIGN IN")))}));var lt=Object(f.b)(function(e){return{auth:e.auth,userPosts:e.userPosts,fetchStatus:e.fetchStatus}})(function(e){var t=Object(a.useState)(!1),n=Object(fe.a)(t,2),c=n[0],o=n[1],s=Object(a.useState)(""),l=Object(fe.a)(s,2),u=l[0],i=l[1],m=Object(a.useState)([]),p=Object(fe.a)(m,2),f=p[0],h=p[1],E=function(t){t.persist(),o(function(e){return!0}),i(function(){return t.target.name}),h(function(){return e.auth[t.target.id]})},g=e.auth,v=g.imageId,b=g.subscriptions,O=g.followers,j=g.username,I=g._id,y=e.fetchStatus,S=e.userPosts;return r.a.createElement("main",null,r.a.createElement("div",{className:"userInfoHeader"},r.a.createElement(d.b,{to:"/profile/"+I},r.a.createElement("figure",{className:"profilePic"},r.a.createElement("img",{src:"".concat(W.URI,"/feed/image/").concat(v),alt:""}),r.a.createElement("figcaption",null,j))),r.a.createElement("div",{className:"headerInfoContainer"},r.a.createElement("div",{className:"userMeta"},r.a.createElement("span",null,S.length," posts"),r.a.createElement("span",null,r.a.createElement("button",{name:"Followers",id:"followers",onClick:E},O.length," followers")),r.a.createElement("span",null,r.a.createElement("button",{name:"Subscriptions",id:"subscriptions",onClick:E},b.length," following"))),r.a.createElement(d.b,{to:"/edit",className:"editBtn"},"EDIT PROFILE"))),r.a.createElement(pe,null),y>0?r.a.createElement(Ye,null):r.a.createElement(Be,{posts:S}),c?r.a.createElement(Fe,{handleClose:function(e){e.persist(),o(function(e){return!1})},modalHeaderName:u,users:f}):null)}),ut=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{id:"wrapper"},r.a.createElement(B,null),r.a.createElement(p.d,null,r.a.createElement(p.b,{path:"/",exact:!0,render:function(){return localStorage.getItem("username")?r.a.createElement(qe,null):r.a.createElement(ot,null)}}),r.a.createElement(p.b,Object.assign({path:"/profile/:userId"},this.props,{render:function(e){return localStorage.getItem("username")?r.a.createElement(Xe,e):r.a.createElement(ot,null)}})),r.a.createElement(p.b,{path:"/me",render:function(){return localStorage.getItem("username")?r.a.createElement(lt,null):r.a.createElement(ot,null)}}),r.a.createElement(p.b,{path:"/discover",render:function(){return localStorage.getItem("username")?r.a.createElement($e,null):r.a.createElement(ot,null)}}),r.a.createElement(p.b,{path:"/edit",render:function(){return localStorage.getItem("username")?r.a.createElement(rt,null):r.a.createElement(ot,null)}}),r.a.createElement(p.b,{path:"/signin",render:function(){return localStorage.getItem("username")?r.a.createElement(qe,null):r.a.createElement(ot,null)}}),r.a.createElement(p.b,{path:"/signup",render:function(){return localStorage.getItem("username")?r.a.createElement(qe,null):r.a.createElement(st,null)}}),r.a.createElement(p.b,{component:ct})),r.a.createElement(Y,null))}},{key:"componentDidMount",value:function(){this.props.getSubsPosts(),this.props.getUserPosts(localStorage.getItem("userId"))}}]),t}(a.Component);var it=Object(f.b)(function(e){return{auth:e.auth}},function(e){return{getUserPosts:function(t){return e((n=t,function(){var e=Object(X.a)(K.a.mark(function e(t){var a,r;return K.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t(oe()),e.next=4,fetch("".concat(W.URI,"/feed/posts/").concat(n),{headers:{"Content-Type":"application/json",Authorization:"Api "+localStorage.getItem("token")}});case 4:return a=e.sent,e.next=7,a.json();case 7:r=e.sent,t(H(r.posts)),t(se()),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),t(le()),console.log(e.t0);case 16:case"end":return e.stop()}},e,null,[[0,12]])}));return function(t){return e.apply(this,arguments)}}()));var n},getSubsPosts:function(){return e(function(){var e=Object(X.a)(K.a.mark(function e(t){var n,a;return K.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t(oe()),e.next=4,fetch("".concat(W.URI,"/feed/posts"),{headers:{"Content-Type":"application/json",Authorization:"Api "+localStorage.getItem("token")}});case 4:return n=e.sent,e.next=7,n.json();case 7:a=e.sent,t(se()),t(ne(a.posts)),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),t(le()),console.log(e.t0);case 16:case"end":return e.stop()}},e,null,[[0,12]])}));return function(t){return e.apply(this,arguments)}}())}}})(ut),mt=n(45),pt=n(20),ft=n(46);var dt=n(37),ht=n(47),Et=n.n(ht),gt=n(48),vt=n.n(gt),bt={key:"root",storage:Et.a,stateReconciler:vt.a,whitelist:["auth"]},Ot=Object(dt.a)(bt,Object(pt.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n={};switch(t.type){case g:case b:case j:case I:case v:return n=Object.assign({},e,t.data);case O:return n={},localStorage.clear(),n;default:return e}},userPosts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n={};switch(t.type){case x:case T:case F:return t.data;case C:return n=[].concat(Object(de.a)(e),[t.data]);case R:case _:case U:case P:var a=e.findIndex(function(e){return e._id===t.data._id});return-1!==a?((n=Object(de.a)(e))[a]=t.data,n):e;case A:return[];default:return e}},users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ne:return t.data;default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n={};switch(t.type){case ge:case ve:return n=Object.assign({},e,t.data);case Ee:return n=t.data;case be:n=Object(De.a)({},e);var a=e.posts.findIndex(function(e){return e._id===t.data._id});return-1!==a?(n.posts[a]=t.data,n):e;default:return e}},posts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=[];switch(t.type){case ee:return t.data?n=[].concat(Object(de.a)(e),Object(de.a)(t.data)):e;case Q:case Z:case $:var a=e.findIndex(function(e){return e._id===t.data._id});return-1!==a?((n=Object(de.a)(e))[a]=t.data,n):e;default:return e}},fetchStatus:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;switch((arguments.length>1?arguments[1]:void 0).type){case re:return e+1;case ce:case ae:return e-1;default:return e}},errors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case xe:return Array.isArray(t.data)?t.data:[].concat(Object(de.a)(e),[t.data]);case Ce:return[];default:return e}}})),jt=function(){var e=Object(pt.d)(Ot,Object(pt.a)(ft.a));return{store:e,persistor:Object(dt.b)(e)}}(),It=jt.persistor,yt=jt.store;o.a.render(r.a.createElement(d.a,null,r.a.createElement(f.a,{store:yt},r.a.createElement(mt.a,{persistor:It},r.a.createElement(ue.SnackbarProvider,null,r.a.createElement(it,null))))),document.getElementById("root"))}},[[51,1,2]]]);
//# sourceMappingURL=main.bc614fdc.chunk.js.map